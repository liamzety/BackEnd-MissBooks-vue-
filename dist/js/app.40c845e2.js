(function(e){function t(t){for(var o,a,s=t[0],l=t[1],c=t[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={app:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2997:function(e,t,n){"use strict";var o=n("8f26"),r=n.n(o);r.a},"3ed1":function(e,t,n){},"3f64":function(e,t,n){"use strict";var o=n("4cc3"),r=n.n(o);r.a},"4cc3":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("user-msg"),n("div",{staticClass:"bg-wrapper"}),n("div",{staticClass:"bg"}),n("router-view"),n("scroll-up-btn")],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isTopBtn?n("button",{staticClass:"topbtn",on:{click:e.scrollIntoView}},[n("span",[e._v("TOP")])]):e._e()])},s=[],l={data:function(){return{innerWidth:window.innerWidth,isTopBtn:!1}},created:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{scrollIntoView:function(){var e=document.querySelector("#app");e.scrollIntoView({block:"start",behavior:"smooth"})},handleScroll:function(e){e.target.scrollingElement.scrollTop>100?this.isTopBtn=!0:this.isTopBtn=!1}}},c=l,u=n("2877"),d=Object(u["a"])(c,a,s,!1,null,null,null),f=d.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{directives:[{name:"show",rawName:"v-show",value:e.msg,expression:"msg"}],staticClass:"user-msg"},[e._v(" "+e._s(e.msg)+" ")])},m=[],v=new o["a"],h=v,g={data:function(){return{msg:""}},created:function(){var e=this;h.$on("showMsg",(function(t){console.log("L;ALAF"),e.msg=t,setTimeout((function(){e.msg=""}),2e3)}))},destroyed:function(){h.$off("showMsg")}},b=g,w=(n("3f64"),Object(u["a"])(b,p,m,!1,null,null,null)),k=w.exports,_={components:{ScrollUpBtn:f,userMsg:k}},x=_,y=Object(u["a"])(x,r,i,!1,null,null,null),R=y.exports,j=n("8c4f"),B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("book-header",{attrs:{filterBy:e.filterBy}}),0!==e.books.length?n("book-list",{attrs:{booksToShow:e.booksToShow}}):n("loader")],1)},O=[],C=(n("4de4"),n("caad"),n("2532"),n("53ca")),S=n("2909"),P=(n("96cf"),n("1da1")),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"book-list container"},[n("h2",[e._v("Our Books")]),n("div",{staticClass:"grid"},e._l(e.books,(function(e,t){return n("book-preview",{key:t,attrs:{book:e}})})),1)])},I=[],$=(n("fb6a"),n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-link",{attrs:{to:e.bookDetailLink}},[n("div",{staticClass:"book-preview relative flex  align-center column text-center cursor-pointer",class:e.isAnimated?"animate__animated animate__bounce":"",on:{mouseenter:function(t){return e.animate()}}},[n("div",{staticClass:"pic",style:{backgroundImage:"url("+e.book.volumeInfo.imageLinks.thumbnail+")"}}),n("h4",[e._v(e._s(e.book.volumeInfo.title))]),this.book.volumeInfo.allowAnonLogging?n("div",{staticClass:"onsale absolute flex justify-center align-center"},[e._v(" On Sale! ")]):e._e()])])}),E=[],M={props:["book"],data:function(){return{isAnimated:!1,bookDetailLink:"/book/".concat(this.book.id)}},methods:{animate:function(){var e=this;this.isAnimated=!0,setTimeout((function(){e.isAnimated=!1}),1e3)}}},L=M,A=Object(u["a"])(L,$,E,!1,null,null,null),N=A.exports,D={props:["booksToShow"],data:function(){return{books:null,allBooks:null,currPage:20}},created:function(){window.addEventListener("scroll",this.handleScroll),this.allBooks=Object(S["a"])(this.booksToShow),this.books=Object(S["a"])(this.booksToShow),this.books.length>20&&(this.books=this.books.splice(0,20))},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{showMore:function(){console.log("this.booksToShow.length",this.booksToShow.length),this.books.length!==this.booksToShow.length&&(this.currPage+=3,this.books=this.allBooks.slice(0,this.currPage),console.log("this.books.length",this.books.length))},handleScroll:function(){console.log("scrolling"),window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&this.showMore()}},components:{BookPreview:N}},F=D,q=Object(u["a"])(F,T,I,!1,null,null,null),H=q.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"book-header flex justify-center align-center"},[e.filterBy?n("div",{staticClass:"container"},[n("h1",[e._v("Miss Books")]),n("form",{staticClass:"grid"},[n("h3",[e._v("Search for books")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.title,expression:"filterBy.title"}],attrs:{type:"text",placeholder:"By name"},domProps:{value:e.filterBy.title},on:{input:function(t){t.target.composing||e.$set(e.filterBy,"title",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filterBy.minPageRange,expression:"filterBy.minPageRange",modifiers:{number:!0}}],attrs:{type:"num",placeholder:"By min page count"},domProps:{value:e.filterBy.minPageRange},on:{input:function(t){t.target.composing||e.$set(e.filterBy,"minPageRange",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filterBy.maxPageRange,expression:"filterBy.maxPageRange",modifiers:{number:!0}}],attrs:{type:"num",placeholder:"By max page count"},domProps:{value:e.filterBy.maxPageRange},on:{input:function(t){t.target.composing||e.$set(e.filterBy,"maxPageRange",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])]):n("div",{staticClass:"container"},[n("h1",[e._v("Miss Books")]),n("router-link",{attrs:{to:"/book"}},[e._v(" go back ")])],1)])},V=[],Y={props:["filterBy"]},U=Y,W=Object(u["a"])(U,J,V,!1,null,null,null),z=W.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loader"},[n("img",{attrs:{src:e.loader,alt:""}})])},X=[],K=n("ce32"),Q=n.n(K),Z={computed:{loader:function(){return Q.a}}},ee=Z,te=(n("a071"),Object(u["a"])(ee,G,X,!1,null,null,null)),ne=te.exports,oe=(n("99af"),n("7db0"),n("d81d"),n("d3b7"),n("5530"));function re(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null}function ie(e,t){localStorage[e]=JSON.stringify(t)}var ae={loadFromStorage:re,saveToStorage:ie},se={query:ce,getById:pe,addReview:ve,getBooks:de},le=ae.loadFromStorage("books")||ce();function ce(){return ue.apply(this,arguments)}function ue(){return ue=Object(P["a"])(regeneratorRuntime.mark((function e(){var t,n,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"witcher",e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(t,"&maxResults=40&key=AIzaSyAXsefBbuz_jTbmr1vlxg7VvDh5bYEg7nA"));case 3:return n=e.sent,e.next=6,n.json();case 6:return n=e.sent,le=n.items,ae.saveToStorage("books",le),e.abrupt("return",le);case 10:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function de(){return fe.apply(this,arguments)}function fe(){return fe=Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",le);case 1:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}function pe(e){return me.apply(this,arguments)}function me(){return me=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le.find((function(e){return e.id===t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}function ve(e,t){return he.apply(this,arguments)}function he(){return he=Object(P["a"])(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.id=ge(),le=le.map((function(e){return e.id===t&&(e.reviews?e.reviews=[n].concat(Object(S["a"])(e.reviews)):e.reviews=[n],o=Object(oe["a"])({},e)),e})),ae.saveToStorage("books",le),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}function ge(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var be={data:function(){return{books:[],filterBy:{title:"",minPageRange:"",maxPageRange:""}}},mounted:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,se.getBooks();case 2:e.books=t.sent;case 3:case"end":return t.stop()}}),t)})))()},components:{BookList:H,BookHeader:z,Loader:ne},computed:{booksToShow:function(){var e=Object(S["a"])(this.books),t=this.filterBy,n=t.title,o=t.minPageRange,r=t.maxPageRange;return console.log("type of ",Object(C["a"])(o)),n&&(e=e.filter((function(e){return e.volumeInfo.title.toLowerCase().includes(n.toLowerCase())}))),o&&(e=e.filter((function(e){return e.volumeInfo.pageCount>o}))),r&&(e=e.filter((function(e){return e.volumeInfo.pageCount<r}))),e}}},we=be,ke=Object(u["a"])(we,B,O,!1,null,null,null),_e=ke.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.book?n("section",{staticClass:"book-details"},[n("book-header"),n("div",{staticClass:"book-details-container container flex justify-center align-center column text-center"},[n("div",{staticClass:"book-info-container flex align-center justify-center "},[n("div",{staticClass:"img-container relative"},[n("img",{attrs:{src:e.book.volumeInfo.imageLinks.thumbnail}}),e.book.volumeInfo.allowAnonLogging?n("div",{staticClass:"onsale absolute flex justify-center align-center"},[e._v(" On Sale! ")]):e._e()]),n("div",{staticClass:"book-info flex align-center column"},[n("h2",[e._v(e._s(e.book.volumeInfo.title))]),n("p",{staticClass:"sub-text"},[e._v(e._s(e.book.volumeInfo.subtitle))]),n("p",[e._v("Authors: "+e._s(e.book.volumeInfo.authors))]),n("p",[e._v("Publisher: "+e._s(e.book.volumeInfo.publisher))]),n("p",[e._v(" Published date: "+e._s(e.book.volumeInfo.publishedDate)+" "),n("span",{style:e.spanColor},[e._v(e._s(e.publishedEval))])]),n("p",[e._v(e._s(e.timeReading))])])]),n("hr"),n("h2",[e._v("Description")]),n("long-txt",{attrs:{txt:e.book.volumeInfo.description}})],1),n("review-add",{on:{addReview:e.addReview}}),e.book.reviews?n("div",{staticClass:"container"},[n("h2",[e._v("Reviews("+e._s(e.book.reviews.length)+")")]),n("div",{staticClass:"review-list "},e._l(e.book.reviews,(function(e){return n("book-review",{key:e.id,attrs:{review:e}})})),1)]):e._e()],1):e._e()},ye=[],Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"review-add flex justify-center align-center column"},[n("h2",[e._v("Add a review")]),n("form",{staticClass:"flex justify-center align-center column",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("div",{staticClass:"flex justify-center review-col column"},[n("div",{staticClass:" review- flex align-center space-between"},[n("label",{attrs:{for:"reviewerName"}},[e._v("Your name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.name,expression:"input.name"}],ref:"nameInput",attrs:{required:"",id:"reviewerName",type:"text",name:"name",placeholder:"Full Name",autocomplete:"off"},domProps:{value:e.input.name},on:{input:function(t){t.target.composing||e.$set(e.input,"name",t.target.value)}}})]),n("div",{staticClass:"flex align-center space-between"},[n("label",{attrs:{for:"datepicker"}},[e._v("Finished reading at:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.date,expression:"input.date"}],attrs:{id:"datepicker",name:"date",type:"date"},domProps:{value:e.input.date},on:{input:function(t){t.target.composing||e.$set(e.input,"date",t.target.value)}}})]),n("div",{staticClass:"flex align-center space-between"},[n("label",[e._v("Rating")]),n("div",{staticClass:"flex justify-center align-center"},[n("font-awesome-icon",{attrs:{icon:"star"},on:{click:function(t){return e.onRate("1")}}}),n("font-awesome-icon",{attrs:{icon:"star"},on:{click:function(t){return e.onRate("2")}}}),n("font-awesome-icon",{attrs:{icon:"star"},on:{click:function(t){return e.onRate("3")}}}),n("font-awesome-icon",{attrs:{icon:"star"},on:{click:function(t){return e.onRate("4")}}}),n("font-awesome-icon",{attrs:{icon:"star"},on:{click:function(t){return e.onRate("5")}}})],1)])]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.input.desc,expression:"input.desc"}],attrs:{name:"desc",cols:"35",rows:"3",required:""},domProps:{value:e.input.desc},on:{input:function(t){t.target.composing||e.$set(e.input,"desc",t.target.value)}}}),n("button",[e._v("Submit")])])])},je=[],Be={mounted:function(){this.$refs.nameInput.focus()},data:function(){return{input:{name:"",date:"",rating:"",desc:""}}},methods:{onRate:function(e){this.input.rating=e},onSubmit:function(){var e=Object(oe["a"])({},this.input);this.$emit("addReview",e),h.$emit("showMsg","added review")}}},Oe=Be,Ce=(n("2997"),Object(u["a"])(Oe,Re,je,!1,null,null,null)),Se=Ce.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"review flex justify-center align-center column"},[n("p",[e._v("Name: "+e._s(e.review.name||"BooksReader"))]),e.review.rating?n("p",[e._v("Rating: "+e._s(e.review.rating))]):e._e(),n("p",[e._v("Review: "+e._s(e.review.desc))]),e.review.date?n("p",[e._v("Finished Reading: "+e._s(e.review.date))]):e._e()])},Te=[],Ie={props:["review"],created:function(){console.log("IM CREATED")}},$e=Ie,Ee=(n("f090"),Object(u["a"])($e,Pe,Te,!1,null,null,null)),Me=Ee.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"flex column"},[e._v(" "+e._s(e.txtToShow)+" "),e.txt.length>400?n("div",{staticClass:"readmore",on:{click:e.toggleBtnTxt}},[e._v(" "+e._s(e.btnTxt)+" ")]):e._e()])},Ae=[],Ne={props:["txt"],data:function(){return{isReadMore:!0}},computed:{btnTxt:function(){var e=this.isReadMore?"Read More":"Read Less";return e},txtToShow:function(){var e=this.txt;return this.isReadMore&&this.txt.length>400&&(e=e.slice(0,399)+"..."),e}},methods:{toggleBtnTxt:function(){this.isReadMore=!this.isReadMore}}},De=Ne,Fe=Object(u["a"])(De,Le,Ae,!1,null,null,null),qe=Fe.exports,He={created:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,se.getById(e.$route.params.id);case 2:e.book=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{book:null}},components:{BookHeader:z,ReviewAdd:Se,BookReview:Me,LongTxt:qe},methods:{addReview:function(e){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,se.addReview(t.book.id,e);case 2:o=n.sent,t.book=o,console.log("book:",t.book);case 5:case"end":return n.stop()}}),n)})))()}},computed:{timeReading:function(){var e=parseInt(this.book.volumeInfo.pageCount);return e<100?"Light Reading":e>200&&e<500?"Meduim time reading":"Long Reading"},publishedEval:function(){var e=parseInt(this.book.volumeInfo.publishedDate),t=(new Date).getFullYear();return t-e<=15?"New!":"Old"},spanColor:function(){return"color: ".concat("Old"===this.publishedEval?"#a7a4a4":"#27c527")},reviews:function(){return this.book.reviews}}},Je=He,Ve=Object(u["a"])(Je,xe,ye,!1,null,null,null),Ye=Ve.exports,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"home"},[n("h1",[e._v("Welcome... home")]),n("router-link",{attrs:{to:"/book"}},[e._v(" Go to the shop ")])],1)},We=[],ze={},Ge=Object(u["a"])(ze,Ue,We,!1,null,null,null),Xe=Ge.exports;o["a"].use(j["a"]);var Ke=[{path:"/book/:id",component:Ye},{path:"/book",name:"BookApp",component:_e},{path:"/",component:Xe}],Qe=new j["a"]({routes:Ke}),Ze=Qe,et=(n("3ed1"),n("77ed"),n("ecee")),tt=n("c074"),nt=n("ad3d");et["c"].add(tt["a"]),o["a"].component("font-awesome-icon",nt["a"]),o["a"].config.productionTip=!1,new o["a"]({router:Ze,render:function(e){return e(R)}}).$mount("#app")},"680d":function(e,t,n){},"8f26":function(e,t,n){},a071:function(e,t,n){"use strict";var o=n("c25f"),r=n.n(o);r.a},c25f:function(e,t,n){},ce32:function(e,t,n){e.exports=n.p+"img/load.5adae6ea.gif"},f090:function(e,t,n){"use strict";var o=n("680d"),r=n.n(o);r.a}});
//# sourceMappingURL=app.40c845e2.js.map